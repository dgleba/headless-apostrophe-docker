{% extends data.outerLayout %}
{% import "apostrophe-templates:nav.html" as nav %}

{% block title %}{{ super() }} | {{ data.page.title }}{% endblock %}

{% block beforeMain %}
  {{ nav.menubar(data.global._menus, 4, data.piece.title) }}
{% endblock %}

{% block main %}
  <main class="at career-show">
    <section class="at_timeline at_content show">
      <ul class="at_timeline__list">
        <li class="at_timeline__element in-view hide zoom">
          <div class="at_timeline__container">

            <time>
              {{ data.piece.startDate | date("MM/YYYY") }}
              {% if data.piece.endDate | date("MM/YYYY") != data.piece.startDate | date("MM/YYYY") %} - {{ data.piece.endDate | date("MM/YYYY") }} {% endif %}
            </time>

            {{ data.piece.summary.items[0].content | safe }}
            {% for description in data.piece.description %}
              {{ description.content.items[0].content | safe }}
              {{ description.link }}
            {% endfor %}

            <div class="at_timeline__checkmark ajax" href="{{ data.page.slug }}">
              <svg class="checkmark">
                <g>
                  <circle cx="16" cy="16" r="15.12"></circle>
                  <path d="M10 10 22 22 M22 10 10 22"><path/>
                </g>
              </svg>
            </div>

          </div>
        </li>
      </ul>

      {% if data.previous %}
        <h4 class="at_timeline__links at_timeline__links--previous">
          <a href="{{ data.previous._url }}" class="ajax" animate="article" animate-direction="back">
            {{ icon("chevron") }}
          </a>
        </h4>
      {% endif %}

      {% if data.next %}
        <h4 class="at_timeline__links at_timeline__links--next">
          <a href="{{ data.next._url }}" class="ajax" animate="article" animate-direction="forward">
            {{ icon("chevron chevron--forward") }}
          </a>
        </h4>
      {% endif %}

    </section>
  </main>

{% endblock %}

{% macro icon(class) %}
  <svg class="{{ class }}" viewBox="0 0 485 485">
    <g>
      <path d="M413.974,71.026C368.171,25.225,307.274,0,242.5,0S116.829,25.225,71.026,71.026C25.225,116.829,0,177.726,0,242.5 s25.225,125.671,71.026,171.474C116.829,459.775,177.726,485,242.5,485s125.671-25.225,171.474-71.026 C459.775,368.171,485,307.274,485,242.5S459.775,116.829,413.974,71.026z M242.5,455C125.327,455,30,359.673,30,242.5 S125.327,30,242.5,30S455,125.327,455,242.5S359.673,455,242.5,455z"/>
      <polygon points="270.524,114.411 142.852,242.5 270.524,370.589 291.772,349.411 185.209,242.5 291.772,135.589"/>
    </g>
  </svg>
{% endmacro %}